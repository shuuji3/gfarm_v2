<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE
>gfservice-agent</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><H1
><A
NAME="GFSERVICE-AGENT.1"
></A
>gfservice-agent</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="NAME"
></A
><H2
>Name</H2
>gfservice-agent&nbsp;--&nbsp;<B
CLASS="COMMAND"
>gfservice</B
> のエージェント</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="SYNOPSIS"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>gfservice-agent</B
>  [<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
>]  ホスト ID   サブコマンド  [<TT
CLASS="REPLACEABLE"
><I
>引数 ...</I
></TT
>]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="DESCRIPTION"
></A
><H2
>DESCRIPTION</H2
><P
><B
CLASS="COMMAND"
>gfservice-agent</B
> は、<B
CLASS="COMMAND"
>gfservice</B
> の
エージェントです。
<B
CLASS="COMMAND"
>gfservice</B
> を用いて操作したいホストすべてに、この
エージェントをインストールする必要があります。
<B
CLASS="COMMAND"
>gfservice</B
> と異なり、設定ファイルは読み込みません。</P
><P
><B
CLASS="COMMAND"
>gfservice-agent</B
> は、ユーザが直接実行することを意図
して作成されたものではありません。
日常の利用では、SSH と Sudo を介して <B
CLASS="COMMAND"
>gfservice</B
> コマンド
によって実行されるだけです。</P
><P
>ホスト ID 引数は <B
CLASS="COMMAND"
>gfservice</B
> のものと同じですが、
<B
CLASS="COMMAND"
>gfservice-agent</B
> ではホスト ID をホストの種別
("gfmd", "gfsd", "client" のいずれか) を区別するため、および
デバッグメッセージのためにしか使っていません。</P
><P
><B
CLASS="COMMAND"
>gfservice-agent</B
> のサブコマンド名は 
<B
CLASS="COMMAND"
>gfservice</B
> のものに似ていますが、引数は異なります。
たとえば、<B
CLASS="COMMAND"
>gfservice-agent</B
> の <B
CLASS="COMMAND"
>unmount</B
>
サブコマンドは、
「<CODE
CLASS="PARAMETER"
>directory</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
>」
という引数をとります。</P
><P
CLASS="LITERALLAYOUT"
>	gfservice-agent&nbsp;client3&nbsp;unmount&nbsp;directory=/somewhere</P
><P
>これに対して、<B
CLASS="COMMAND"
>gfservice</B
> では、
「<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
>」という引数をとります。</P
><P
CLASS="LITERALLAYOUT"
>	gfservice&nbsp;unmount&nbsp;client3&nbsp;/somewhere</P
><P
><B
CLASS="COMMAND"
>gfservice-agent</B
> の引数はほとんどすべて、「キー=値」
という形になっています。
複数の引数をとる場合、引数の順序は任意です。
<B
CLASS="COMMAND"
>gfservice-agent</B
> は、未知のキーを無視します。</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="OPTIONS"
></A
><H2
>OPTIONS</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><CODE
CLASS="OPTION"
>-d</CODE
></DT
><DD
><P
>デバッグ情報を出力します。</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="SUB-COMMANDS"
></A
><H2
>SUB-COMMANDS</H2
><P
><B
CLASS="COMMAND"
>gfservice-agent</B
> は現在のところ、次のサブコマンドを
認識します。</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><B
CLASS="COMMAND"
>get-config-gfarm-param</B
>
<CODE
CLASS="PARAMETER"
>param</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>パラメタ名</I
></TT
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>「<B
CLASS="COMMAND"
>config-gfarm -T</B
>」コマンドを実行して、
「<TT
CLASS="REPLACEABLE"
><I
>パラメタ名</I
></TT
> 」の値を標準出力に出力します。
引数「<CODE
CLASS="PARAMETER"
>param</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>パラメタ名</I
></TT
>」
が省略された場合は、「<B
CLASS="COMMAND"
>config-gfarm -T</B
>」コマンドの
結果すべてを出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>get-config-gfsd-param</B
>
<CODE
CLASS="PARAMETER"
>param</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>パラメタ名</I
></TT
>
<CODE
CLASS="PARAMETER"
>config-gfsd-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>「<B
CLASS="COMMAND"
>config-gfsd -T</B
>」コマンドを実行して、
「<TT
CLASS="REPLACEABLE"
><I
>パラメタ名</I
></TT
>」の値を標準出力に
出力します。
引数「<CODE
CLASS="PARAMETER"
>param</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>パラメタ名</I
></TT
>」
が省略された場合は、「<B
CLASS="COMMAND"
>config-gfsd -T</B
>」コマンドの
結果すべてを出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backend-db-status</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>バックエンドデータベースが動作中であれば、終了コード 0 で終了します。
それ以外の場合は、1 で終了します。</P
></DD
><DT
><B
CLASS="COMMAND"
>gfmd-status</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>gfmd が動作中であれば、終了コード 0 で終了します。
それ以外の場合は、1 で終了します。</P
></DD
><DT
><B
CLASS="COMMAND"
>gfsd-status</B
>
<CODE
CLASS="PARAMETER"
>config-gfsd-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>gfsd が動作中であれば、終了コード 0 で終了します。
それ以外の場合は、1 で終了します。</P
></DD
><DT
><B
CLASS="COMMAND"
>start-backend-db</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
>
<CODE
CLASS="PARAMETER"
>timeout</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>時間</I
></TT
></DT
><DD
><P
>バックエンドデータベースが実行中でなければ、実行を開始します。</P
></DD
><DT
><B
CLASS="COMMAND"
>start-gfmd</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
>
<CODE
CLASS="PARAMETER"
>timeout</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>時間</I
></TT
></DT
><DD
><P
>gfmd が実行中でなければ、実行を開始します。</P
></DD
><DT
><B
CLASS="COMMAND"
>start-gfsd</B
>
<CODE
CLASS="PARAMETER"
>config-gfsd-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
>
<CODE
CLASS="PARAMETER"
>timeout</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>時間</I
></TT
></DT
><DD
><P
>gfsd が実行中でなければ、実行を開始します。</P
></DD
><DT
><B
CLASS="COMMAND"
>config-gfarm</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>「<B
CLASS="COMMAND"
>config-gfarm</B
>」コマンドを実行します。</P
></DD
><DT
><B
CLASS="COMMAND"
>config-gfarm-master</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>「<B
CLASS="COMMAND"
>config-gfarm</B
> <CODE
CLASS="PARAMETER"
>-r</CODE
>」コマンドを実行
します。</P
></DD
><DT
><B
CLASS="COMMAND"
>config-gfsd</B
>
<CODE
CLASS="PARAMETER"
>config-gfsd-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>「<B
CLASS="COMMAND"
>config-gfsd</B
>」コマンドを実行します。</P
></DD
><DT
><B
CLASS="COMMAND"
>unconfig-gfarm</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
><B
CLASS="COMMAND"
>stop-gfarm</B
> サブコマンドを実行して、その後 gfmd と
バックエンドデータベースが作成したファイルやディレクトリをすべて削除します。</P
></DD
><DT
><B
CLASS="COMMAND"
>unconfig-gfsd</B
>
<CODE
CLASS="PARAMETER"
>config-gfsd-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>サブコマンド <B
CLASS="COMMAND"
>stop-gfsd</B
> を実行し、その後 gfsd が作成した
ファイルやディレクトリをすべて削除します。</P
></DD
><DT
><B
CLASS="COMMAND"
>unconfig-client</B
>
<CODE
CLASS="PARAMETER"
>config-gfsd-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfarm2.conf</TT
> ファイルと共有秘密鍵ファイルを削除します。</P
></DD
><DT
><B
CLASS="COMMAND"
>promote</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
><B
CLASS="COMMAND"
>gfmd</B
> をスレーブからマスターへ昇格させます。</P
></DD
><DT
><B
CLASS="COMMAND"
>promote-gfmd</B
>
<CODE
CLASS="PARAMETER"
>config-gfarm-options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>サブコマンド <B
CLASS="COMMAND"
>promote</B
> の別名です。</P
></DD
><DT
><B
CLASS="COMMAND"
>mount</B
>
<CODE
CLASS="PARAMETER"
>directory</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
>
<CODE
CLASS="PARAMETER"
>options</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>オプション</I
></TT
></DT
><DD
><P
>Gfarm2 ファイルシステムを「<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
>」に
マウントします。</P
></DD
><DT
><B
CLASS="COMMAND"
>unmount</B
>
<CODE
CLASS="PARAMETER"
>directory</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
></DT
><DD
><P
>「<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
>」にマウントされた Gfarm2
ファイルシステムをアンマウントします。</P
></DD
><DT
><B
CLASS="COMMAND"
>umount</B
>
<CODE
CLASS="PARAMETER"
>directory</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>ディレクトリ</I
></TT
></DT
><DD
><P
>サブコマンド <B
CLASS="COMMAND"
>unmount</B
> の別名です。</P
></DD
><DT
><B
CLASS="COMMAND"
>set-gfmd-conf</B
>
<CODE
CLASS="PARAMETER"
>directive</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>
<CODE
CLASS="PARAMETER"
>value</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>値</I
></TT
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfmd.conf</TT
> ファイルに、</P
><P
CLASS="LITERALLAYOUT"
>	<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>&nbsp;<TT
CLASS="REPLACEABLE"
><I
>値</I
></TT
></P
><P
>という行を追加します。</P
></DD
><DT
><B
CLASS="COMMAND"
>set-gfarm-conf</B
>
<CODE
CLASS="PARAMETER"
>directive</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>
<CODE
CLASS="PARAMETER"
>value</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>値</I
></TT
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfarm2.conf</TT
> ファイルに、</P
><P
CLASS="LITERALLAYOUT"
>	<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>&nbsp;<TT
CLASS="REPLACEABLE"
><I
>値</I
></TT
></P
><P
>という行を追加します。</P
></DD
><DT
><B
CLASS="COMMAND"
>set-gfsd-conf</B
>
<CODE
CLASS="PARAMETER"
>directive</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>
<CODE
CLASS="PARAMETER"
>value</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>値</I
></TT
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfsd.conf</TT
> ファイルに、</P
><P
CLASS="LITERALLAYOUT"
>	<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>&nbsp;<TT
CLASS="REPLACEABLE"
><I
>値</I
></TT
></P
><P
>という行を追加します。</P
></DD
><DT
><B
CLASS="COMMAND"
>unset-gfmd-conf</B
>
<CODE
CLASS="PARAMETER"
>directive</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
></DT
><DD
><P
>「<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>」行を <TT
CLASS="FILENAME"
>gfmd.conf</TT
>
ファイルから削除します。</P
></DD
><DT
><B
CLASS="COMMAND"
>unset-gfarm-conf</B
>
<CODE
CLASS="PARAMETER"
>directive</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
></DT
><DD
><P
>「<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>」行を <TT
CLASS="FILENAME"
>gfarm.conf</TT
>
ファイルから削除します。</P
></DD
><DT
><B
CLASS="COMMAND"
>unset-gfsd-conf</B
>
<CODE
CLASS="PARAMETER"
>directive</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
></DT
><DD
><P
>「<TT
CLASS="REPLACEABLE"
><I
>設定名称</I
></TT
>」行を <TT
CLASS="FILENAME"
>gfsd.conf</TT
>
ファイルから削除します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backup-backend-db</B
></DT
><DD
><P
>バックエンドデータベースのバックアップを行い、バックアップデータを標準出力
へ出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backup-gfmd-conf</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfmd.conf</TT
> ファイルを標準出力に出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backup-gfarm-conf</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfarm2.conf</TT
> ファイルを標準出力に出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backup-gfsd-conf</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfsd.conf</TT
> ファイルを標準出力に出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backup-usermap</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>usermap</TT
> ファイルを標準出力に出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>backup-shared-key</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>$HOME/.gfarm_shared_key</TT
> ファイルを標準出力に
出力します。</P
></DD
><DT
><B
CLASS="COMMAND"
>restore-backend-db</B
></DT
><DD
><P
>バックエンドデータベースをリストアします。
バックアップデータは、標準入力から読み込みます。</P
></DD
><DT
><B
CLASS="COMMAND"
>restore-gfmd-conf</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfmd.conf</TT
> ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。</P
></DD
><DT
><B
CLASS="COMMAND"
>restore-gfarm-conf</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfarm2.conf</TT
> ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。</P
></DD
><DT
><B
CLASS="COMMAND"
>restore-gfsd-conf</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>gfsd.conf</TT
> ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。</P
></DD
><DT
><B
CLASS="COMMAND"
>restore-usermap</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>usermap</TT
> ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。</P
></DD
><DT
><B
CLASS="COMMAND"
>restore-shared-key</B
></DT
><DD
><P
><TT
CLASS="FILENAME"
>$HOME/.gfarm_shared_key</TT
> ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。</P
></DD
><DT
><B
CLASS="COMMAND"
>gfcmd</B
>
<CODE
CLASS="PARAMETER"
>cmd</CODE
>=<TT
CLASS="REPLACEABLE"
><I
>コマンド名</I
></TT
>
<CODE
CLASS="PARAMETER"
>args</CODE
>="<TT
CLASS="REPLACEABLE"
><I
>コマンドの引数 ...</I
></TT
>"</DT
><DD
><P
>Gfarm コマンドを実行します。</P
></DD
></DL
></DIV
></DIV
></BODY
></HTML
>
