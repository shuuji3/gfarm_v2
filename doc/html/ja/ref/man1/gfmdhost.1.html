<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>gfmdhost</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><H1
><A
NAME="GFMDHOST.1"
></A
>gfmdhost</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="NAME"
></A
><H2
>Name</H2
>gfmdhost&nbsp;--&nbsp;gfarm メタデータサーバ管理コマンド</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="SYNOPSIS"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>gfmdhost</B
> [-l] [-P <TT
CLASS="REPLACEABLE"
><I
>path</I
></TT
>]</P
><P
><B
CLASS="COMMAND"
>gfmdhost</B
> {-c | -m} [-P <TT
CLASS="REPLACEABLE"
><I
>path</I
></TT
>] [-p <TT
CLASS="REPLACEABLE"
><I
>ポート番号</I
></TT
>] [-C <TT
CLASS="REPLACEABLE"
><I
>クラスタ名</I
></TT
>] [-t 
     {m | c | s}
  ] {<TT
CLASS="REPLACEABLE"
><I
>メタデータサーバ名</I
></TT
>}</P
><P
><B
CLASS="COMMAND"
>gfmdhost</B
> {-d} [-P <TT
CLASS="REPLACEABLE"
><I
>path</I
></TT
>] {<TT
CLASS="REPLACEABLE"
><I
>メタデータサーバ名</I
></TT
>}</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="DESCRIPTION"
></A
><H2
>DESCRIPTION</H2
><P
><B
CLASS="COMMAND"
>gfmdhost</B
> は
gfarm のメタデータサーバの冗長化機能に関連する情報の表示や管理を行います。
<B
CLASS="COMMAND"
>gfmdhost</B
> が実行する機能は
-l, -c, -m, -d のオプションで選択します。
これら機能の指定は排他的であり、どれか一つだけを指定することができます。
また、一つも指定しなかった場合には、
デフォルトの機能である gfmd ホスト名の一覧表示が行われます。</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="FUNCTIONS"
></A
><H2
>FUNCTIONS</H2
><P
>  下記は、<B
CLASS="COMMAND"
>gfmdhost</B
>コマンドの機能一覧です。二つ以上の機能を同時に
  指定することはできません。</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>無指定</DT
><DD
><P
>	登録されているgfmdホストのホスト名一覧を、
	アルファベット順で表示します。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-l</CODE
></DT
><DD
><P
>        登録されている gfmd ホストのホスト名一覧を、
        詳細情報と共に表示します。クラスタ名ごとにホスト名を
        アルファベット順で表示します。
      </P
><P
>        詳細情報は次の順に表示されます。
      </P
><P
><CODE
CLASS="OPTION"
>接続状態 (+|-)</CODE
></P
><P
>        "+" はマスター gfmd と正常に接続していることを表します。
        "-" は接続していないことを表します。
	"?" は、マスター gfmd と接続直後でまだ状態が判明してないか、あるいは
	Gfarm-2.5.0 の gfmd に対して、Gfarm-2.5.1 以降の gfmdhost コマンド
	から接続した場合に表示されます。
	"x" はマスター gfmd と接続できたものの、切断している間の更新量が
        多く自動同期が不可能となり、バックエンド・データベースのダンプ・
	リストアを用いて同期をとる必要が生じていることを表します。
	"e" は何らかのエラーが生じ、ログの調査が必要なことを表します。
	"x" および "e" については、そのスレーブgfmdが停止した後でも、
	表示が続きます。
        マスター gfmd は常に "+" です。
      </P
><P
><CODE
CLASS="OPTION"
>サーバ種別 (master|slave)</CODE
></P
><P
>        マスターであるか、スレーブであるかを表します。
      </P
><P
><CODE
CLASS="OPTION"
>レプリケーション種別 (sync|async|-)</CODE
></P
><P
>        sync は同期レプリケーション、
        async は非同期レプリケーションを表します。
	マスター gfmd には "-" が表示されます。
      </P
><P
><CODE
CLASS="OPTION"
>マスター候補の設定 (c|m|s)</CODE
></P
><P
>        m はデフォルトのマスター、c はマスター候補、
        s はスレーブ専用の gfmd を表します。
      </P
><P
><CODE
CLASS="OPTION"
>クラスタ名</CODE
></P
><P
>        gfmd が属するクラスタ名です。
        デフォルトのクラスタは "(default)" と表示されます。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-c</CODE
></DT
><DD
><P
>	引数で指定した gfmd ホストを登録します。
	任意でオプション -C、-p、-t を指定します。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-m</CODE
></DT
><DD
><P
>	引数で指定した gfmd ホストを変更します。
	任意でオプション -C、-p、-t を指定します。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-d</CODE
></DT
><DD
><P
>	引数で指定した gfmd ホストを削除します。
	マスター gfmd を削除することはできません。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-?</CODE
></DT
><DD
><P
>引数オプションを表示します。</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="OPTIONS"
></A
><H2
>OPTIONS</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><CODE
CLASS="OPTION"
>-C</CODE
> <TT
CLASS="PARAMETER"
><I
>クラスタ名</I
></TT
></DT
><DD
><P
>        -c, -m 機能で gfmd ホストが属するクラスタ名を指定します。
	省略した場合、デフォルトのクラスタに属します。
      </P
><P
>	クラスタ名は同期レプリケーションのグループを表します。
	マスター gfmd と同一のクラスタに所属する gfmd 間は同期レプリケー
	ションとなり、それ以外の gfmd は非同期レプリケーションとなります。
	同期レプリケーションが行われているスレーブ gfmd は、
	メタデータ操作を失うことなくマスター gfmd に昇格することが可能です。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-p</CODE
> <TT
CLASS="PARAMETER"
><I
>ポート番号</I
></TT
></DT
><DD
><P
>        -c, -m 機能で gfmd のポート番号を指定します。
	省略した場合、デフォルトのポート番号 601 を指定したことになります。
      </P
></DD
><DT
>-t {m|c|s}</DT
><DD
><P
>	-c, -m 機能でマスター候補の設定を指定します。
        m はデフォルトのマスター、c はマスター候補、
        s はスレーブ専用を表します。
	省略した場合、c を指定したことになります。
	デフォルトのマスターをマスター候補およびスレーブ専用へ、
	直接変更することはできません。
	デフォルトのマスター以外の gfmd を -t m
	によりデフォルトのマスターに変更すると、
	以前のデフォルトのマスターがマスター候補に変更されます。
      </P
></DD
><DT
><CODE
CLASS="OPTION"
>-P</CODE
> <TT
CLASS="PARAMETER"
><I
>path</I
></TT
></DT
><DD
><P
>	このコマンドがアクセスするメタデータサーバを特定するための
	パス名または Gfarm URL を指定します。
	省略した場合は、"/" を指定したのと同じ意味になります。
      </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="SEE-ALSO"
></A
><H2
>SEE ALSO</H2
><P
>  <SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>gfarm2.conf</SPAN
>(5)</SPAN
></P
></DIV
></BODY
></HTML
>