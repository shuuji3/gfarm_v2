.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFPERF-METADATA" "1" "07 March 2012" "Gfarm" ""

.SH NAME
gfperf-metadata \- Gfarm メタデータの性能測定を行う。
.SH SYNOPSIS

\fBgfperf-metadata\fR [ \fB-n, --number \fIテスト実施数\fB\fR ] [ \fB-t, --testdir \fIテストディレクトリ\fB\fR ] [ \fB-u, --unit \fI出力の単位\fB\fR ]

.SH "DESCRIPTION"
.PP
引数 \fIテストディレクトリ\fR にテスト用のファイルやディレクトリを作成し、その実行性能を測定します。
.PP
測定する項目は次の通りです。
.TP
\fBcreate\fR
gfs_pio_create()またはcreat()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBreaddir\fR
gfs_opendir_caching()から\fIテスト実施数\fR分gfs_readdir()を行い、gfs_closedir()を実行するまでの性能を測定します。
posixの場合はopendir()から\fIテスト実施数\fR分readdir()を行い、closedir()を実行するまでの性能を測定します。
出力結果は上記測定にかかった時間を\fIテスト実施数\fRで割った平均値です，
.TP
\fBreaddir+stat\fR
上記readdirの測定時に\fIテスト実施数\fR分gfs_lstat_cached()またはlstat()を実行した時間を足して測定したものです。
出力結果は測定にかかった時間を\fIテスト実施数\fRで割った平均値です。
.TP
\fBunlink\fR
gfs_unlink()またはunlink()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBmkdir\fR
gfs_mkdir()またはmkdir()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBstat\fR
gfs_lstat()またはlstat()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBchmod\fR
gfs_chmod()またはchmod()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fButimes\fR
gfs_utimes()またはutimes()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBrename\fR
gfs_rename()またはrename()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBsymlink\fR
gfs_symlink()またはsymlink()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBreadlink\fR
gfs_readlink()またはreadlink()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBsetxattr\fR
gfs_setxattr()またはsetxattr()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBgetxattr\fR
gfs_getxattr()またはgetxattr()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBremovexattr\fR
gfs_removexattr()またはremovexattr()の性能を測定します。
出力結果は１回辺りの平均値です。
.TP
\fBrmdir\fR
gfs_rmdir()またはrmdir()の性能を測定します。
出力結果は１回辺りの平均値です。
.SH "OPTIONS"
.TP
\fB-n, --number \fIテスト実施数\fB\fR
それぞれの測定項目に対して何回実施するかを指定します。デフォルトは250です。
.TP
\fB-t, --testdir \fIテストディレクトリ\fB\fR
テストを実施するディレクトリを指定します。
gfarm url(gfarm:///で始まるもの)を指定した場合、該当のgfarm上のディレクトリに対してlibgfarmの関数を使用した場合の性能を測定します。
file url(file:///で始まるもの)を指定した場合、該当のunixファイルシステム上にposixの関数を使用した場合の性能を測定します。
デフォルトはgfarm:///tmpです。
.TP
\fB-u, --uinit \fI出力の単位\fB\fR
ops(operations per second)またはusecを指定します。指定した単位で出力を返します。デフォルトはopsです。
