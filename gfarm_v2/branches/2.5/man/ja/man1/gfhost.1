.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFHOST" "1" "31 January 2012" "Gfarm" ""

.SH NAME
gfhost \- gfarm ホスト管理コマンド
.SH SYNOPSIS

\fBgfhost\fR [ \fB-H\fR | \fB-l\fR | \fB-M\fR ] [ \fB-iLprUv\fR ] [ \fB-P \fIpath\fB\fR ] [ \fB-a \fIアーキテクチャ\fB\fR ] [ \fB-D \fIドメイン名\fB\fR ] [ \fB-j \fI並列度\fB\fR ] [ \fB\fIホスト名\fB\fR\fI ...\fR ]


\fBgfhost\fR \fB-c\fR [ \fB-P \fIpath\fB\fR ] \fB-a\fIアーキテクチャ\fB\fR \fB-p\fIポート番号\fB\fR [ \fB-n\fICPU数\fB\fR ] \fB\fIホスト名\fB\fR


\fBgfhost\fR \fB-m\fR [ \fB-P \fIpath\fB\fR ] [ \fB-a\fIアーキテクチャ\fB\fR ] [ \fB-p\fIポート番号\fB\fR ] [ \fB-n\fICPU数\fB\fR ] [ \fB-A\fR ] \fB\fIホスト名\fB\fR


\fBgfhost\fR \fB-d\fR [ \fB-P \fIpath\fB\fR ] \fB\fIホスト名\fB\fR\fI ...\fR


\fBgfhost\fR \fB-R\fR [ \fB-P \fIpath\fB\fR ]

.SH "DESCRIPTION"
.PP
\fBgfhost\fR は、gfarm のファイルシステムノードに
関する情報の表示や管理を行ないます。\fBgfhost\fR が
実行する機能は、-c, -d, -H, -l, -M, -m, -R のオプションで指定します。
これら機能の指定は排他的であり、どれか一つだけを指定することができます。
また、一つも指定しなかった場合には、デフォールトの機能であるホスト名
表示が行なわれます。
.SH "FUNCTIONS"
.PP
機能指定のうち、-c, -d, -M, -m, -R はメタデータサーバーのみを
アクセスし、登録されているホスト情報の追加、削除、表示、変更を行ないます。
.PP
機能指定のうち、-H, -l, -M, および特に機能を指定しなかった場合は、
ファイルシステムノードに関する情報を表示します。
このうち -M はメタデータサーバーのみをアクセスしますが、
それ以外の機能はファイルシステムノードで動作している
\fBgfsd\fR にもアクセスします。
\fBgfsd\fR にアクセスする機能に関しては、そのアクセスに
関するオプションを -i, -j, -U, -v で指定できます。
.PP
表示機能に関しては、ホスト名の指定を省略することができます。この場合、
メタデータに登録されている全てのホストに関する表示を試みます。
また、-a および -D オプションで表示するホストの種類を限定
することもできます。
表示の順序は、ホスト名のアルファベット順ですが、-L, -r, -u オプションで
順序を変更することができます。ただし、-M 機能
と、機能を指定しなかった場合 
に関しては -L オプションは無効です。
.PP
下記は、gfhost コマンドの機能一覧です。二つ以上の機能を同時に
指定することはできません。
.TP
\fB無指定\fR
機能を特に指定しなかった場合、\fBgfsd\fR への
問い合わせを行ない、動作しているホストのホスト名のみを表示します。
デフォールトでは、ホスト名のアルファベット順で表示します。
.TP
\fB-c\fR
引数で指定したホストをメタデータへ登録します。
オプション -a で、そのホストのアーキテクチャを指定する必要があります。
同様にオプション -p で、そのホストのポート番号を指定する必要があります。
オプション -n で、そのホストの CPU 数を指定します。省略した場合には
1 CPU だとみなします。
.TP
\fB-d\fR
引数に指定したホスト情報をメタデータから削除します。
現在のところ、複製情報として参照されているホストも
削除できてしまいますが、これを行なうと複製データベースが不整合
状態となってしまいますので注意が必要です。
.TP
\fB-H\fR
\fBgfsd\fR に問い合わせて得た情報、すなわち
ロードアベレージと認証手段を表示します。
この機能に関しては、引数でホスト名を指定した場合、表示される
のは、固有識別子として用いられているホスト名ではなく、引数
で指定した名前になります。
また、ホスト名の後に、アクセスに用いられた IP アドレスを括弧で
囲って表示します。

ホストが停止やネットワーク障害のためにアクセスできなかった場合、
ロードアベレージの部分に x.xx/x.xx/x.xx と表示します。
ホストが動作しているが、そのホストの \fBgfsd\fR へ
アクセスできなかった場合には -.--/-.--/-.-- と表示します。

その次の一桁の欄は認証手段で、「G」は GSI 認証および暗号化、
「g」は認証処理のみ GSI で認証後は保護のない生データ (gsi_auth)、
「s」は sharedsecret 認証、「x」は認証失敗、「-」は認証を
試みなかったことを示します。また、「-U」オプション指定時には、
この認証手段の表示欄はなくなります。

デフォールトでは、ホスト名のアルファベット順で表示します。
.TP
\fB-l\fR
\fBgfsd\fR に問い合わせて得た情報、
すなわちロードアベレージおよび認証手段と、
メタデータ・サーバーに問い合わせて得た情報、
すなわちアーキテクチャ名、CPU数を
全て表示します。またアクセスに用いられたホスト名の後に、
IP アドレスを括弧で囲って表示します。

ホストが停止やネットワーク障害のためにアクセスできなかった場合、
ロードアベレージの部分に x.xx/x.xx/x.xx と表示します。
ホストが動作しているが、そのホストの \fBgfsd\fR へ
アクセスできなかった場合には -.--/-.--/-.-- と表示します。

その次の一桁の欄は認証手段で、「G」は GSI 認証および暗号化、
「g」は認証処理のみ GSI で認証後は保護のない生データ (gsi_auth)、
「s」は sharedsecret 認証、「x」は認証失敗、「-」は認証を
試みなかったことを示します。また、「-U」オプション指定時には、
この認証手段の表示欄はなくなります。

デフォールトでは、ホスト名のアルファベット順で表示します。
.TP
\fB-M\fR
メタデータに登録されているホスト情報を表示します。
デフォールトでは、ホスト名のアルファベット順で表示します。
.TP
\fB-m\fR
固有識別子として用いられているホスト名を指定し、メタデータ
に登録されているホスト情報を変更します。
-a オプションおよび -n オプションは、それぞれ既存の値を置き換えます。
.TP
\fB-R\fR
標準入力からホストに関する情報を読み込み、メタデータに
追加します。与える情報の形式は、-M 機能の表示形式と同じです。
.TP
\fB-?\fR
引数オプションを表示します。
.SH "OPTIONS"
.TP
\fB-a \fIアーキテクチャ\fB\fR
CPUアーキテクチャを、sparc-sun-solaris8 や i386-redhat8.0-linux の
ような形式で指定します。
-c および -m 機能の場合には、追加・変更するホストのアーキテクチャと
して、このオプションを用います。
-H, -l, -M および特に機能を指定しなかった場合で、かつ
ホスト名を省略した場合には、指定したアーキテクチャのホストに
関してのみ表示を行ないます。
.TP
\fB-D \fIドメイン名\fB\fR
-H, -l, -M および特に機能を指定しなかった場合で、かつ
ホスト名を省略した場合に、このオプションで、表示するドメイン名を
限定できます。
.TP
\fB-i\fR
%%SYSCONFDIR%%/gfarm2.conf ないし $HOME/.gfarm2rc 中で「address_use」を指定すると、
アクセスに用いるネットワークアドレスに優先順位をつけることができます。
gfhost コマンドに対しても、この優先順位は影響しますが、-i オプションを
つけると、この指定を無視して \fBgfsd\fR にアクセス
するようになります。
.TP
\fB-j \fI並列度\fB\fR
\fBgfsd\fR にアクセスする際の並列度を指定します。
デフォールトは 10 です。
.TP
\fB-L\fR
-H、-l 機能の場合
、このオプションで、
表示順序を、ロードアベレージ順に変更します。
.TP
\fB-n \fICPU数\fB\fR
-c および -m 機能で、ホスト情報を追加・変更する際に、
そのホストが持つ CPU の数を指定します。
.TP
\fB-p \fIポート番号\fB\fR
-c および -m 機能で、ホスト情報を追加・変更する際に、
そのホストの \fBgfsd\fR が用いるポート番号を指定します。
.TP
\fB-P \fIパス名\fB\fR
このコマンドがアクセスするメタデータサーバを特定するための
パス名または Gfarm URL を指定します。
省略した場合は、「/」を指定したのと同じ意味になります。
.TP
\fB-r\fR
表示を整列している場合、表示の順序を逆にします。
.TP
\fB-u\fR
-H, -l, -M および特に機能を指定しなかった場合に、表示する順序を
アルファベット順に整列するのを止めます。
-M 機能の場合、引数でホスト名を指定した場合には
その順序、さもなくばメタデータから取得した順序で表示します。
-H, -l 機能の場合および特に機能を指定しなかった場合、
ホストに順に問い合わせを行い、返事の返ってきた順序で表示します。
.TP
\fB-U\fR
TCP による認証をやめ、
UDP によるロードアベレージの問い合わせのみを行うようにします。
このオプションは、-H ないし -l 機能を指定した場合および
特に機能を指定しなかった場合に意味のあるオプションで、
実行速度が速くなる効果があります。
-H ないし -l を指定している場合、このオプションを指定すると、
認証方式の表示欄がなくなります。
.TP
\fB-v\fR
-H ないし -l 機能を指定した場合および特に機能を指定しなかった場合、
デフォールトでは、gfsd に対する問い合わせに関するエラーメッセージ
を表示しません。-v オプションを指定すると、このエラーメッセージを
表示するようになります。
.SH "SEE ALSO"
.PP
\fBgfarm2.conf\fR(5),
\fBgfsd\fR(8)
