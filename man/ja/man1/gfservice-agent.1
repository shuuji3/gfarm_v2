.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFSERVICE-AGENT" "1" "07 June 2013" "Gfarm" ""

.SH NAME
gfservice-agent \- gfservice のエージェント
.SH SYNOPSIS

\fBgfservice-agent\fR [ \fB\fIオプション\fB\fR ] \fBホスト ID\fR \fBサブコマンド\fR [ \fB\fI引数 ...\fB\fR ]

.SH "DESCRIPTION"
.PP
\fBgfservice-agent\fR は、\fBgfservice\fR の
エージェントです。
\fBgfservice\fR を用いて操作したいホストすべてに、この
エージェントをインストールする必要があります。
\fBgfservice\fR と異なり、設定ファイルは読み込みません。
.PP
\fBgfservice-agent\fR は、ユーザが直接実行することを意図
して作成されたものではありません。
日常の利用では、SSH と Sudo を介して \fBgfservice\fR コマンド
によって実行されるだけです。
.PP
ホスト ID 引数は \fBgfservice\fR のものと同じですが、
\fBgfservice-agent\fR ではホスト ID をホストの種別
("gfmd", "gfsd", "client" のいずれか) を区別するため、および
デバッグメッセージのためにしか使っていません。
.PP
\fBgfservice-agent\fR のサブコマンド名は 
\fBgfservice\fR のものに似ていますが、引数は異なります。
たとえば、\fBgfservice-agent\fR の \fBunmount\fR
サブコマンドは、
「\fIdirectory\fR=\fIディレクトリ\fR」
という引数をとります。

.nf
	gfservice-agent client3 unmount directory=/somewhere
.fi
.PP
これに対して、\fBgfservice\fR では、
「\fIディレクトリ\fR」という引数をとります。

.nf
	gfservice unmount client3 /somewhere
.fi
.PP
\fBgfservice-agent\fR の引数はほとんどすべて、「キー=値」
という形になっています。
複数の引数をとる場合、引数の順序は任意です。
\fBgfservice-agent\fR は、未知のキーを無視します。
.SH "OPTIONS"
.TP
\fB-d\fR
デバッグ情報を出力します。
.SH "SUB-COMMANDS"
.PP
\fBgfservice-agent\fR は現在のところ、次のサブコマンドを
認識します。
.TP
\fBget-config-gfarm-param \fIparam\fB=\fIパラメタ名\fB \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
「\fBconfig-gfarm -T\fR」コマンドを実行して、
「\fIパラメタ名\fR 」の値を標準出力に出力します。
引数「\fIparam\fR=\fIパラメタ名\fR」
が省略された場合は、「\fBconfig-gfarm -T\fR」コマンドの
結果すべてを出力します。
.TP
\fBget-config-gfsd-param \fIparam\fB=\fIパラメタ名\fB \fIconfig-gfsd-options\fB=\fIオプション\fB\fR
「\fBconfig-gfsd -T\fR」コマンドを実行して、
「\fIパラメタ名\fR」の値を標準出力に
出力します。
引数「\fIparam\fR=\fIパラメタ名\fR」
が省略された場合は、「\fBconfig-gfsd -T\fR」コマンドの
結果すべてを出力します。
.TP
\fBbackend-db-status \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
バックエンドデータベースが動作中であれば、終了コード 0 で終了します。
それ以外の場合は、1 で終了します。
.TP
\fBgfmd-status \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
gfmd が動作中であれば、終了コード 0 で終了します。
それ以外の場合は、1 で終了します。
.TP
\fBgfsd-status \fIconfig-gfsd-options\fB=\fIオプション\fB\fR
gfsd が動作中であれば、終了コード 0 で終了します。
それ以外の場合は、1 で終了します。
.TP
\fBstart-backend-db \fIconfig-gfarm-options\fB=\fIオプション\fB \fItimeout\fB=\fI時間\fB\fR
バックエンドデータベースが実行中でなければ、実行を開始します。
.TP
\fBstart-gfmd \fIconfig-gfarm-options\fB=\fIオプション\fB \fItimeout\fB=\fI時間\fB\fR
gfmd が実行中でなければ、実行を開始します。
.TP
\fBstart-gfsd \fIconfig-gfsd-options\fB=\fIオプション\fB \fItimeout\fB=\fI時間\fB\fR
gfsd が実行中でなければ、実行を開始します。
.TP
\fBconfig-gfarm \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
「\fBconfig-gfarm\fR」コマンドを実行します。
.TP
\fBconfig-gfarm-master \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
「\fBconfig-gfarm\fR \fI-r\fR」コマンドを実行
します。
.TP
\fBconfig-gfsd \fIconfig-gfsd-options\fB=\fIオプション\fB\fR
「\fBconfig-gfsd\fR」コマンドを実行します。
.TP
\fBunconfig-gfarm \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
\fBstop-gfarm\fR サブコマンドを実行して、その後 gfmd と
バックエンドデータベースが作成したファイルやディレクトリをすべて削除します。
.TP
\fBunconfig-gfsd \fIconfig-gfsd-options\fB=\fIオプション\fB\fR
サブコマンド \fBstop-gfsd\fR を実行し、その後 gfsd が作成した
ファイルやディレクトリをすべて削除します。
.TP
\fBunconfig-client \fIconfig-gfsd-options\fB=\fIオプション\fB\fR
\fIgfarm2.conf\fR ファイルと共有秘密鍵ファイルを削除します。
.TP
\fBpromote \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
\fBgfmd\fR をスレーブからマスターへ昇格させます。
.TP
\fBpromote-gfmd \fIconfig-gfarm-options\fB=\fIオプション\fB\fR
サブコマンド \fBpromote\fR の別名です。
.TP
\fBmount \fIdirectory\fB=\fIディレクトリ\fB \fIoptions\fB=\fIオプション\fB\fR
Gfarm2 ファイルシステムを「\fIディレクトリ\fR」に
マウントします。
.TP
\fBunmount \fIdirectory\fB=\fIディレクトリ\fB\fR
「\fIディレクトリ\fR」にマウントされた Gfarm2
ファイルシステムをアンマウントします。
.TP
\fBumount \fIdirectory\fB=\fIディレクトリ\fB\fR
サブコマンド \fBunmount\fR の別名です。
.TP
\fBset-gfmd-conf \fIdirective\fB=\fI設定名称\fB \fIvalue\fB=\fI値\fB\fR
\fIgfmd.conf\fR ファイルに、

.nf
	\fI設定名称\fR \fI値\fR
.fi

という行を追加します。
.TP
\fBset-gfarm-conf \fIdirective\fB=\fI設定名称\fB \fIvalue\fB=\fI値\fB\fR
\fIgfarm2.conf\fR ファイルに、

.nf
	\fI設定名称\fR \fI値\fR
.fi

という行を追加します。
.TP
\fBset-gfsd-conf \fIdirective\fB=\fI設定名称\fB \fIvalue\fB=\fI値\fB\fR
\fIgfsd.conf\fR ファイルに、

.nf
	\fI設定名称\fR \fI値\fR
.fi

という行を追加します。
.TP
\fBunset-gfmd-conf \fIdirective\fB=\fI設定名称\fB\fR
「\fI設定名称\fR」行を \fIgfmd.conf\fR
ファイルから削除します。
.TP
\fBunset-gfarm-conf \fIdirective\fB=\fI設定名称\fB\fR
「\fI設定名称\fR」行を \fIgfarm.conf\fR
ファイルから削除します。
.TP
\fBunset-gfsd-conf \fIdirective\fB=\fI設定名称\fB\fR
「\fI設定名称\fR」行を \fIgfsd.conf\fR
ファイルから削除します。
.TP
\fBbackup-backend-db\fR
バックエンドデータベースのバックアップを行い、バックアップデータを標準出力
へ出力します。
.TP
\fBbackup-gfmd-conf\fR
\fIgfmd.conf\fR ファイルを標準出力に出力します。
.TP
\fBbackup-gfarm-conf\fR
\fIgfarm2.conf\fR ファイルを標準出力に出力します。
.TP
\fBbackup-gfsd-conf\fR
\fIgfsd.conf\fR ファイルを標準出力に出力します。
.TP
\fBbackup-usermap\fR
\fIusermap\fR ファイルを標準出力に出力します。
.TP
\fBbackup-shared-key\fR
\fI$HOME/.gfarm_shared_key\fR ファイルを標準出力に
出力します。
.TP
\fBrestore-backend-db\fR
バックエンドデータベースをリストアします。
バックアップデータは、標準入力から読み込みます。
.TP
\fBrestore-gfmd-conf\fR
\fIgfmd.conf\fR ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。
.TP
\fBrestore-gfarm-conf\fR
\fIgfarm2.conf\fR ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。
.TP
\fBrestore-gfsd-conf\fR
\fIgfsd.conf\fR ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。
.TP
\fBrestore-usermap\fR
\fIusermap\fR ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。
.TP
\fBrestore-shared-key\fR
\fI$HOME/.gfarm_shared_key\fR ファイルをリストアします。
バックアップデータは、標準入力から読み込みます。
.TP
\fBgfcmd \fIcmd\fB=\fIコマンド名\fB \fIargs\fB="\fIコマンドの引数 ...\fB"\fR
Gfarm コマンドを実行します。
